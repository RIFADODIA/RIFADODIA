<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RIFA BRASIL - Sorteio Di√°rio</title>
  <script>
    // üîπ CONFIGURA√á√ïES EDIT√ÅVEIS
    const config = {
      premiumValue: 100,          // valor do pr√™mio
      ticketValue: 5,            // valor da cota
      winningNumber: null,        // n√∫mero sorteado (null = n√£o sorteado ainda)
      reservedGroups: "[1] [2] [3] [.4] [5] [6] [7] [8] [9] [10] [11] [12] [13] [14] [.15] [16] [17] [18] [19] [20] [21] [22] [23] [24] [.25]",  // string com grupos reservados
      pixKey: "75981816830 Nilton Cesar Gabriel Machado", // sua chave PIX aqui
      whatsappNumber: "5575983728830" // n√∫mero do WhatsApp
    };

    const animals = [
      "AVESTRUZ", "√ÅGUIA", "BURRO", "BORBOLETA", "CACHORRO",
      "CABRA", "CARNEIRO", "CAMELO", "COBRA", "COELHO",
      "CAVALO", "ELEFANTE", "GALO", "GATO", "JACAR√â",
      "LE√ÉO", "MACACO", "PORCO", "PAV√ÉO", "PERU",
      "TOURO", "TIGRE", "URSO", "VEADO", "VACA"
    ];

    let selectedGroup = null;
    let generatedId = null;
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 500px;
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      position: relative;
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 5px;
      background: linear-gradient(90deg, #1a2a6c, #b21f1f, #fdbb2d);
    }

    .header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }

    h1 {
      color: #b21f1f;
      margin-bottom: 8px;
      font-size: 24px;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .header p {
      color: #1a2a6c;
      font-weight: 600;
      font-size: 16px;
    }

    .welcome-message {
      background: linear-gradient(to right, #e7f3ff, #d9e8ff);
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      font-size: 15px;
      line-height: 1.5;
      border-left: 5px solid #1a2a6c;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.05);
    }

    .welcome-message p {
      margin: 0;
      color: #1a2a6c;
    }

    .prize-info {
      background: linear-gradient(to right, #f0f8ff, #e3f2ff);
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
      border: 2px dashed #1a2a6c;
      position: relative;
      overflow: hidden;
    }

    .prize-info::before {
      content: 'üéØ';
      position: absolute;
      top: -10px;
      left: -10px;
      font-size: 20px;
      opacity: 0.2;
    }

    .prize-info::after {
      content: 'üí∞';
      position: absolute;
      bottom: -10px;
      right: -10px;
      font-size: 20px;
      opacity: 0.2;
    }

    .prize-info h2 {
      color: #b21f1f;
      margin-bottom: 8px;
      font-size: 22px;
    }

    .prize-info p {
      color: #1a2a6c;
      font-weight: 600;
      font-size: 16px;
    }

    .blocks-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-bottom: 20px;
    }

    .block {
      background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
      border: 2px solid #1a2a6c;
      border-radius: 8px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 12px 5px;
      min-height: 80px;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: #1a2a6c;
      opacity: 0.3;
    }

    .block:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 8px 15px rgba(0,0,0,0.15);
    }

    .block-numbers {
      font-size: 15px;
      font-weight: bold;
      margin-bottom: 5px;
      text-align: center;
      color: #1a2a6c;
    }

    .block-animal {
      font-size: 12px;
      text-align: center;
      font-weight: 600;
      color: #b21f1f;
    }

    .block.reserved {
      background: linear-gradient(to bottom, #ffcdd2, #ef9a9a);
      color: #666;
      border-color: #b21f1f;
      cursor: not-allowed;
    }
    
    .block.winner {
      background: linear-gradient(to bottom, #c8e6c9, #a5d6a7);
      color: #2e7d32;
      border-color: #2e7d32;
      box-shadow: 0 0 15px rgba(46, 125, 50, 0.5);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .winner-section {
      background: linear-gradient(to right, #fff8e1, #ffecb3);
      padding: 15px;
      border-radius: 10px;
      margin-top: 20px;
      text-align: center;
      border-left: 5px solid #ffa000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.08);
    }

    .winner-section h3 {
      color: #b21f1f;
      margin-bottom: 10px;
      font-size: 18px;
    }

    .confirmation-section {
      margin-top: 25px;
      padding: 20px;
      background: linear-gradient(to right, #fff3cd, #ffecb3);
      border-radius: 10px;
      border-left: 5px solid #ffc107;
      display: none;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .confirmation-message {
      margin-bottom: 20px;
      font-weight: bold;
      color: #856404;
      font-size: 16px;
      line-height: 1.4;
    }

    .confirmation-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
    }

    .btn {
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 16px;
      min-width: 100px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .btn-yes {
      background: linear-gradient(to bottom, #28a745, #218838);
      color: white;
    }

    .btn-yes:hover {
      background: linear-gradient(to bottom, #218838, #1e7e34);
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0,0,0,0.15);
    }

    .btn-no {
      background: linear-gradient(to bottom, #dc3545, #c82333);
      color: white;
    }

    .btn-no:hover {
      background: linear-gradient(to bottom, #c82333, #bd2130);
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0,0,0,0.15);
    }

    .no-winner {
      font-style: italic;
      color: #888;
      font-size: 16px;
    }

    #winnerNumber {
      font-size: 18px;
      color: #b21f1f;
      font-weight: bold;
    }

    .footer-note {
      text-align: center;
      margin-top: 20px;
      color: white;
      font-size: 14px;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>RIFA SORTEIO QUANDO ENCHER 19:00</h1>
      <p>SORTEIO BICHO AS 19:00 HORAS</p>
    </div>
    
    <div class="welcome-message">
      <p><strong>Seja bem-vindo!</strong> Clique no grupo que deseja e em seguida escolha SIM ou N√ÉO para enviar e deixar reservado aqui na p√°gina. Obrigado a todos pela contribui√ß√£o!</p>
    </div>
    
    <div class="prize-info">
      <h2>Pr√™mio: R$ <span id="premiumValue"></span>,00</h2>
      <p>Valor por cota: R$ <span id="ticketValue"></span>,00</p>
    </div>
    
    <div class="blocks-container" id="blocksContainer"></div>
    
    <div class="winner-section">
      <h3>N√∫mero Sorteado</h3>
      <p><strong id="winnerNumber" class="no-winner">Aguardando sorteio...</strong></p>
    </div>
    
    <!-- üîπ Se√ß√£o de confirma√ß√£o -->
    <div class="confirmation-section" id="confirmationSection">
      <div class="confirmation-message" id="confirmationMessage"></div>
      <div class="confirmation-buttons">
        <button class="btn btn-yes" id="btnYes">Sim</button>
        <button class="btn btn-no" id="btnNo">N√£o</button>
      </div>
    </div>
  </div>
  
  <div class="footer-note">
    RIFA BRASIL ¬© 2025 - Todos os direitos reservados
  </div>
  
  <script>
    function init() {
      document.getElementById("premiumValue").textContent = config.premiumValue;
      document.getElementById("ticketValue").textContent = config.ticketValue;
      generateBlocks();
      updateWinnerDisplay();
      
      // Configurar eventos dos bot√µes
      document.getElementById("btnYes").addEventListener("click", confirmSelection);
      document.getElementById("btnNo").addEventListener("click", cancelSelection);
    }

    function generateBlocks() {
      const blocksContainer = document.getElementById("blocksContainer");
      blocksContainer.innerHTML = "";

      // Converter a string de grupos reservados em array
      const reservedGroups = parseReservedGroups(config.reservedGroups);

      for (let i = 1; i <= 25; i++) {
        const block = document.createElement("div");
        block.className = "block";
        block.dataset.block = i;

        const startNum = (i - 1) * 4 + 1;
        const numbers = [];

        for (let j = 0; j < 4; j++) {
          let num = startNum + j;
          if (num > 100) num = num - 100;
          if (num === 100) num = 0;
          numbers.push(num.toString().padStart(2, "0"));
        }

        block.innerHTML = `
          <div class="block-numbers">${numbers.join("-")}</div>
          <div class="block-animal">${animals[i-1]}</div>
        `;

        // Verificar se o grupo est√° reservado (tem um ponto em qualquer posi√ß√£o dentro dos colchetes)
        if (reservedGroups.includes(i)) {
          block.classList.add("reserved");
        } else {
          block.addEventListener("click", () => {
            selectedGroup = i;
            generatedId = generateRandomId();
            showConfirmation(i, animals[i-1], numbers.join(", "), generatedId);
          });
        }

        // Verificar se este grupo √© o vencedor
        if (config.winningNumber !== null && config.winningNumber !== undefined && config.winningNumber !== "") {
          let groupNumber;
          let winningNumber = config.winningNumber;
          
          if (winningNumber === 0) winningNumber = 100;
          
          if (winningNumber % 4 === 0) {
            groupNumber = winningNumber / 4;
          } else {
            groupNumber = Math.ceil(winningNumber / 4);
          }
          
          if (winningNumber === 100) groupNumber = 25;
          
          if (i === groupNumber) {
            block.classList.add("winner");
            // Remover a classe reserved se for o vencedor
            block.classList.remove("reserved");
          }
        }

        blocksContainer.appendChild(block);
      }
    }

    function parseReservedGroups(reservedString) {
      const reservedArray = [];
      
      // Procurar por padr√µes como [.2], [2.], [2., etc.
      const regex = /\[([^\]]*\.?[^\]]*)\]/g;
      let match;
      
      while ((match = regex.exec(reservedString)) !== null) {
        const content = match[1]; // Conte√∫do dentro dos colchetes
        
        // Verificar se h√° um ponto em qualquer posi√ß√£o
        if (content.includes('.')) {
          // Extrair apenas os d√≠gitos num√©ricos
          const numberMatch = content.match(/\d+/);
          if (numberMatch) {
            const number = parseInt(numberMatch[0]);
            if (!isNaN(number) && number >= 1 && number <= 25) {
              reservedArray.push(number);
            }
          }
        }
      }
      
      return reservedArray;
    }

    function showConfirmation(groupNumber, animalName, numbers, id) {
      const message = `Tem certeza que deseja reservar o grupo ${groupNumber} (${animalName}) com os n√∫meros ${numbers}? Seu ID de confirma√ß√£o √©: ${id}`;
      document.getElementById("confirmationMessage").textContent = message;
      document.getElementById("confirmationSection").style.display = "block";
      
      // Rolagem suave para a se√ß√£o de confirma√ß√£o
      document.getElementById("confirmationSection").scrollIntoView({ behavior: "smooth" });
    }

    function confirmSelection() {
      if (selectedGroup && generatedId) {
        const numbers = getNumbersForGroup(selectedGroup);
        const animalName = animals[selectedGroup-1];
        const idText = `GRUPO-${selectedGroup}-${animalName}-${generatedId}`;
        
        // Copiar para a √°rea de transfer√™ncia
        navigator.clipboard.writeText(idText);
        
        // Abrir WhatsApp
        const message = encodeURIComponent(
          `Ol√°, gostaria de reservar o grupo ${selectedGroup} (${animalName})\n` +
          `Meu ID de confirma√ß√£o √©: ${idText}\n\n` +
          `Chave PIX para pagamento:\n${config.pixKey}\n\n` +
          `aguardando o comprovante: seu grupo j√° foi reservado na rifa no site .`
        );
        
        window.open(`https://wa.me/${config.whatsappNumber}?text=${message}`, '_blank');
        
        // Esconder a se√ß√£o de confirma√ß√£o
        document.getElementById("confirmationSection").style.display = "none";
        
        // Resetar sele√ß√£o
        selectedGroup = null;
        generatedId = null;
      }
    }

    function cancelSelection() {
      // Esconder a se√ß√£o de confirma√ß√£o
      document.getElementById("confirmationSection").style.display = "none";
      
      // Resetar sele√ß√£o
      selectedGroup = null;
      generatedId = null;
    }

    function getNumbersForGroup(groupNumber) {
      const startNum = (groupNumber - 1) * 4 + 1;
      const numbers = [];

      for (let j = 0; j < 4; j++) {
        let num = startNum + j;
        if (num > 100) num = num - 100;
        if (num === 100) num = 0;
        numbers.push(num.toString().padStart(2, "0"));
      }
      
      return numbers.join(", ");
    }

    function updateWinnerDisplay() {
      const winnerElement = document.getElementById("winnerNumber");
      
      if (config.winningNumber === null || config.winningNumber === undefined || config.winningNumber === "") {
        winnerElement.textContent = "Aguardando sorteio...";
        winnerElement.className = "no-winner";
      } else {
        let winningNumber = config.winningNumber;
        if (winningNumber === 0) winningNumber = 100;

        let groupNumber;
        if (winningNumber % 4 === 0) {
          groupNumber = winningNumber / 4;
        } else {
          groupNumber = Math.ceil(winningNumber / 4);
        }
        
        if (winningNumber === 100) groupNumber = 25;
        
        const animalIndex = groupNumber > 0 && groupNumber <= 25 ? groupNumber - 1 : 0;
        const displayNumber = config.winningNumber === 0 ? "00" : config.winningNumber.toString().padStart(2, "0");

        winnerElement.textContent = `${displayNumber} - ${animals[animalIndex]}`;
        winnerElement.className = "";
      }
    }

    function generateRandomId(length = 6) {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let result = "";
      for (let i = 0; i < length; i++) {
        result += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return result;
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
